一、总体原则

记住一句话：

记忆 ≠ 对话日志
记忆 = 长期个性化信息的结构化摘要

所以不要建：

conversation_2026_02_01.md
conversation_2026_02_02.md

那只是日志。

我们只保留：

对未来播客生成有价值的信息。

二、推荐的最小可行 MD 结构（MVP 版）
/memory
    profile.md
    preferences.md
    goals.md
    state.md

4 个文件足够。

下面解释每个的作用。

1️⃣ profile.md —— 稳定人格信息

用于记录：

长期兴趣

基本背景

核心身份信息

示例：

# User Profile

## Background
- 从事互联网行业
- 有技术背景

## Core Interests
- 人工智能
- 创业
- 科技趋势

## Long-term Traits
- 喜欢结构清晰的内容
- 偏好理性分析风格

更新频率：很低
触发条件：用户明确表达长期特征

2️⃣ preferences.md —— 播客偏好

这是你产品的核心文件。

# Podcast Preferences

## Topic Preference
- 强烈偏好科技、商业分析
- 不喜欢娱乐八卦

## Format Preference
- 喜欢双人对话
- 不喜欢单口演讲

## Tone Preference
- 偏理性
- 不喜欢过度煽情

## Length Preference
- 理想时长：15-25分钟

这个文件会经常更新。

3️⃣ goals.md —— 当前阶段目标

用于动态阶段信息。

# Current Goals

## Learning Goals
- 正在准备考研
- 想系统学习 AI 技术

## Career Goals
- 希望未来创业

更新频率：中等
变化时替换，不要无限追加。

4️⃣ state.md —— 当前状态（轻量版）

这个不要做成“情绪日记”。

只保留：

当前阶段状态

最近明显变化

# Current State

## Emotional State
- 最近有些焦虑（备考阶段）

## Time Situation
- 每天可用于听播客的时间有限

定期覆盖，而不是追加。

三、生成播客时如何使用这些 MD？

每次生成播客前：

读取：
profile.md
preferences.md
goals.md
state.md

然后拼成系统 prompt：

以下是该用户的长期记忆信息：

[插入 profile 内容]
[插入 preferences 内容]
[插入 goals 内容]
[插入 state 内容]

请基于这些信息生成个性化播客。

就完成了。

四、如何更新 MD（非常关键）

不要：

❌ 每轮对话都改
❌ 自动无限追加

建议机制：

1️⃣ 每次对话结束后：

让 LLM 判断：

以下对话中是否出现值得更新长期记忆的信息？
如果有，输出修改建议。
2️⃣ 只在出现“长期稳定信息”时更新

例如：

“我其实一直不喜欢娱乐播客”

“我最近决定专攻 AI 方向”

不要因为一句：

今天有点烦

就改 state.md。

五、控制文件大小（防爆 context）

目标：

每个 md 控制在 300~800 字以内

总记忆不超过 2000 字

一旦变大：

👉 让 LLM 重新总结压缩

例如：

请压缩以下记忆内容，保留关键信息。
六、一个小优化建议（强烈推荐）

增加一个：

memory_summary.md

内容是：

当前用户的整体画像总结（300 字以内）

生成播客时：

只加载 summary + preferences

不加载全部细节文件

这样更省 token。

七、你现在这个阶段，建议这样走

因为你是：

🖥 macOS 本地

🚀 还在构建产品

🧪 需要快速验证

我建议：

profile.md
preferences.md
goals.md
memory_summary.md

暂时不要 state.md。

情绪可以直接由当前对话判断。

八、未来升级路线（留个接口）

当用户量大或功能复杂：

加入 SQLite

加入向量召回

保留 md 作为“可读层”

但现在没必要。

九、最后一个重要建议（播客产品专属）

你是 AI 播客产品。

记忆最关键的不是“他说过什么”，而是：

他喜欢听什么
他想成为什么样的人

记忆系统应该围绕：

🎯 兴趣
🎯 目标
🎯 内容风格

而不是聊天细节。